<%= yield %>

<script type='text/javascript'>
  $('.facebookShareMain').delegate('a.facebookShareSubmit', 'click', function(event){
    target    = $(this);
    target.removeClass('facebookShareSubmit'); // ensure we don't send it two requests
    container = target.closest('.facebookShare');
    id        = container.data('id');
    url       = container.data('url');
    message   = container.data('message');
    link      = container.data('link');
    name      = container.data('name');

    container.fadeOut(3000);

    $.ajax({
      url:      url,
      dataType: 'html',
      type:     'POST',
      data:     {id: id, message: message, link: link, name: name},
      success:  function(html) { container.replaceWith(html).show() },
      error:    function(html) { console.log('error')  }
    })
    return false;
  });

  $('.facebookShareMain').delegate('a.facebookShareDecline', 'click', function(event){
    target    = $(this);
    container = target.closest('.facebookShare');
    id        = container.data('id');
    url       = container.data('url');
    message   = container.data('message');
    link      = container.data('link');
    name      = container.data('name');

    $.ajax({
      url:      url,
      dataType: 'html',
      data:     {id: id, message: message, link: link, name: name, limit: 1},
      success:  function(html) { container.replaceWith(html) },
      error:    function(html) { console.log('error')  }
    })

    return false;
  })

</script>

